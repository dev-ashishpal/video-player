const player=document.querySelector(".player"),video=player.querySelector(".player--video"),progress=player.querySelector(".progress__bar"),playerControl=player.querySelector(".player--footer"),progressBarCurrent=player.querySelector(".progress__bar--filled-current"),progressBarLoaded=player.querySelector(".progress__bar--filled-loaded"),progressThumb=player.querySelector(".progress__bar--thumb"),progressTime=player.querySelector(".progress__bar--timer"),selector=player.querySelector(".progress"),currTime=player.querySelector(".player--time span:first-of-type"),durTime=player.querySelector(".player--time span:last-of-type"),volumeBar=player.querySelector(".volume__bar"),volumeTab=player.querySelector(".player--option__volume"),playBtn=player.querySelector(".player--option__play"),fwdBtn=player.querySelector('[data-skip="10"]'),bwdBtn=player.querySelector('[data-skip="-10"]'),fullscreenBtn=player.querySelector(".player--option__fullscreen"),playerHeading=player.querySelector(".player--heading");let videoTime=localStorage.getItem("videoTime");function fullscreen(){player.requestFullscreen&&player.requestFullscreen(),document.exitFullscreen&&document.exitFullscreen()}function playHandler(){video.paused?video.play():video.pause()}function toggleBtnHandler(){video.paused?playBtn.innerHTML='\n    <use xlink:href="svg/sprite.svg#icon-play"></use>\n    ':playBtn.innerHTML='\n    <use xlink:href="svg/sprite.svg#icon-pause"></use>\n    '}function volumeMuteHandler(){video.muted=!video.muted}function toggleMuteHandler(){video.muted?volumeTab.innerHTML='\n    <use xlink:href="svg/sprite.svg#icon-volume_off"></use>\n    ':volumeTab.innerHTML='\n    <use xlink:href="svg/sprite.svg#icon-volume_up"></use>\n    '}function progressHandler(){const e=video.currentTime/video.duration*100;progressBarCurrent.style.width=`${e}%`,progressThumb.style.left=`${e}%`,progressThumb.transform=`translateX(-${e}%)`;let r=Math.floor(video.currentTime/60),t=Math.floor(video.currentTime-60*r),o=Math.floor(video.duration/60),n=Math.floor(video.duration-60*o);t<10&&(t="0"+t),r<10&&(r="0"+r),n<10&&(n="0"+n),currTime.innerHTML=`${r}:${t}`,durTime.innerHTML=`${o}:${n}`,localStorage.setItem("videoTime",video.currentTime)}function volumeSliderHandler(){video[this.name]=this.value,video.muted=!1,toggleMuteHandler(),0===video[this.name]&&(console.log("volume 0"),volumeMuteHandler(),toggleMuteHandler())}function skipFwdHandler(){video.currentTime+=parseFloat(fwdBtn.dataset.skip)}function skipBwdHandler(){video.currentTime+=parseFloat(bwdBtn.dataset.skip)}function scrub(e){const r=e.offsetX/progress.offsetWidth*video.duration;video.currentTime=r}video.currentTime=videoTime;const playerAddHeadingHandler=()=>{let e;playerHeading.classList.add("active"),e&&clearTimeout(e),e=setTimeout(mouseStopHeader,8e3)},mouseStopHeader=()=>{playerHeading.classList.remove("active")};function progressTimerHandler(e){progressTime.style.left=`${e.offsetX}px`,progressTime.getBoundingClientRect().x+progressTime.getBoundingClientRect().width>=video.getBoundingClientRect().x+video.getBoundingClientRect().width&&(progressTime.style.left=`${video.offsetWidth-progressTime.offsetWidth/2}px`,console.log(progress.offsetWidth));const r=e.offsetX/progress.offsetWidth*video.duration;let t=Math.floor(r/60),o=Math.floor(r-60*t);o<10&&(o="0"+o),t<10&&(t="0"+t),progressTime.querySelector("span").innerHTML=`${t}:${o}`,progressTime.querySelector("video").currentTime=r}function buffered(){let e=0,r=this.buffered,t=this.currentTime;if(4===this.readyState){for(;!(r.start(e)<=t&&t<=r.end(e));)e+=1;r.start(e),this.duration;let o=r.end(e)/this.duration;progressBarLoaded.style.width=`${100*o}%`}}fullscreenBtn.addEventListener("click",fullscreen),document.addEventListener("keyup",e=>{"f"!==e.key&&"F"!==e.key||(console.log("F is fired!"),fullscreen())}),document.addEventListener("keydown",e=>{"ArrowRight"===e.key&&skipFwdHandler()}),document.addEventListener("keydown",e=>{"ArrowLeft"===e.key&&skipBwdHandler()}),document.addEventListener("keyup",e=>{" "===e.key&&(e.preventDefault(),e.stopPropagation(),playHandler())}),volumeBar.addEventListener("wheel",e=>{const r=-e.deltaY/12500;.01<volumeBar.value<=1&&(volume=+volumeBar.value+ +r,volumeBar.value=volume.toFixed(2),video.volume=volumeBar.value,video.muted=!1,toggleMuteHandler(),video.volume<=0&&(volumeMuteHandler(),toggleMuteHandler()))}),video.addEventListener("dblclick",fullscreen),video.addEventListener("click",playHandler),video.addEventListener("play",toggleBtnHandler),video.addEventListener("pause",toggleBtnHandler),video.addEventListener("timeupdate",progressHandler),video.addEventListener("mousemove",playerAddHeadingHandler),playBtn.addEventListener("click",playHandler),volumeTab.addEventListener("click",volumeMuteHandler),volumeTab.addEventListener("click",toggleMuteHandler),volumeBar.addEventListener("change",volumeSliderHandler),fwdBtn.addEventListener("click",skipFwdHandler),bwdBtn.addEventListener("click",skipBwdHandler),selector.addEventListener("click",scrub),progressThumb.addEventListener("change",scrub),progressBarCurrent.addEventListener("mousemove",progressTimerHandler),progress.addEventListener("mousemove",progressTimerHandler),video.addEventListener("progress",buffered),volumeBar.addEventListener("drag",e=>{console.log(e)});